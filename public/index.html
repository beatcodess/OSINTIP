<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>RECON</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
body{
  margin:0;
  background:url("https://files.catbox.moe/sm4udj.png") center/contain no-repeat fixed #000;
  color:#fff;
  font-family:Arial, sans-serif;
}

#wrap{
  max-width:520px;
  margin:40px auto;
  padding:20px;
  backdrop-filter: blur(12px);
  background:rgba(0,0,0,.65);
  border-radius:14px;
  box-shadow:0 0 18px rgba(255,255,255,.25);
}

h1{
  text-align:center;
  text-shadow:0 0 8px #fff;
}

input,button{
  display:block;
  width:90%;
  margin:10px auto;
  padding:10px;
  background:#000;
  color:#fff;
  border:1px solid #fff;
  border-radius:6px;
}

button{cursor:pointer}

pre{
  white-space:pre-wrap;
  font-size:13px;
}

#map{
  height:260px;
  margin-top:15px;
  border-radius:8px;
}

a{
  position:fixed;
  top:10px;
  right:15px;
  color:#fff;
  text-decoration:none;
}
</style>
</head>

<body>

<a href="https://guns.lol/beatcodes" target="_blank">beatcodes âœ”</a>

<div id="wrap">
  <h1>RECON</h1>
  <input id="target" placeholder="Enter IP or Domain">
  <button onclick="run()">Run Recon</button>
  <pre id="out"></pre>
  <div id="map"></div>
</div>

<audio autoplay loop>
  <source src="https://files.catbox.moe/87e8gv.mp3" type="audio/mpeg">
</audio>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
let map, marker, circle;

async function run(){
  const t=document.getElementById("target").value;
  document.getElementById("out").textContent="Running...";

  const r=await fetch("/api/recon",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({target:t})
  });
  const j=await r.json();
  document.getElementById("out").textContent=JSON.stringify(j,null,2);

  if(j.geo?.lat && j.geo?.lon){
    if(!map){
      map=L.map("map").setView([j.geo.lat,j.geo.lon],7);
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);
    } else {
      map.setView([j.geo.lat,j.geo.lon],7);
      if(marker) map.removeLayer(marker);
      if(circle) map.removeLayer(circle);
    }

    marker=L.marker([j.geo.lat,j.geo.lon]).addTo(map);
    circle=L.circle([j.geo.lat,j.geo.lon],{
      radius: j.vpn_likelihood === "High" ? 80000 : 40000,
      color:"#fff",
      fillOpacity:0.15
    }).addTo(map);
  }
}
</script>

</body>
</html>
